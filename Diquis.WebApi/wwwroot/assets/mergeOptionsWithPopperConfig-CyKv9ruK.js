import{r as f}from"./index-B9lOP-LQ.js";import{b as k}from"./useWindow-BKmZcn0M.js";import{p as E,h as R,a as I,c as x,e as D,o as W,f as K,b as P,d as T,w as z}from"./warning-B3rqXDKQ.js";import{c as A}from"./contains-xpjwsOxO.js";import{o as B,l as M}from"./listen-DOhMskc_.js";import{u as L}from"./useEventCallback-B-qJwqMD.js";var S=Object.prototype.hasOwnProperty;function C(e,t,n){for(n of e.keys())if(h(n,t))return n}function h(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&h(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=C(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=C(t,i),!i)||!h(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(S.call(e,n)&&++r&&!S.call(t,n)||!(n in t)||!h(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function U(e){const t=k();return[e[0],f.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}const V=E({defaultModifiers:[R,I,x,D,W,K,P,T]}),q=["enabled","placement","strategy","modifiers"];function F(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}const G={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},H={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const r=(t.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?t.setAttribute("aria-describedby",r.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:r}=e.elements,i=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const o=r.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",o?`${o},${n.id}`:n.id)}}},Y=[];function se(e,t,n={}){let{enabled:r=!0,placement:i="bottom",strategy:o="absolute",modifiers:d=Y}=n,m=F(n,q);const p=f.useRef(d),s=f.useRef(),a=f.useCallback(()=>{var c;(c=s.current)==null||c.update()},[]),l=f.useCallback(()=>{var c;(c=s.current)==null||c.forceUpdate()},[]),[b,v]=U(f.useState({placement:i,update:a,forceUpdate:l,attributes:{},styles:{popper:{},arrow:{}}})),u=f.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:c})=>{const w={},y={};Object.keys(c.elements).forEach(O=>{w[O]=c.styles[O],y[O]=c.attributes[O]}),v({state:c,styles:w,attributes:y,update:a,forceUpdate:l,placement:c.placement})}}),[a,l,v]),g=f.useMemo(()=>(h(p.current,d)||(p.current=d),p.current),[d]);return f.useEffect(()=>{!s.current||!r||s.current.setOptions({placement:i,strategy:o,modifiers:[...g,u,G]})},[o,i,u,r,g]),f.useEffect(()=>{if(!(!r||e==null||t==null))return s.current=V(e,t,Object.assign({},m,{placement:i,strategy:o,modifiers:[...g,H,u]})),()=>{s.current!=null&&(s.current.destroy(),s.current=void 0,v(c=>Object.assign({},c,{attributes:{},styles:{popper:{}}})))}},[r,e,t]),b}const _=()=>{};function J(e){return e.button===0}function N(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const j=e=>e&&("current"in e?e.current:e),$={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function oe(e,t=_,{disabled:n,clickTrigger:r="click"}={}){const i=f.useRef(!1),o=f.useRef(!1),d=f.useCallback(s=>{const a=j(e);z(!!a,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!a||N(s)||!J(s)||!!A(a,s.target)||o.current,o.current=!1},[e]),m=L(s=>{const a=j(e);a&&A(a,s.target)&&(o.current=!0)}),p=L(s=>{i.current||t(s)});f.useEffect(()=>{var s,a;if(n||e==null)return;const l=B(j(e)),b=l.defaultView||window;let v=(s=b.event)!=null?s:(a=b.parent)==null?void 0:a.event,u=null;$[r]&&(u=M(l,$[r],m,!0));const g=M(l,r,d,!0),c=M(l,r,y=>{if(y===v){v=void 0;return}p(y)});let w=[];return"ontouchstart"in l.documentElement&&(w=[].slice.call(l.body.children).map(y=>M(y,"mousemove",_))),()=>{u==null||u(),g(),c(),w.forEach(y=>y())}},[e,n,r,d,m,p])}function Q(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function X(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function ue({enabled:e,enableEvents:t,placement:n,flip:r,offset:i,fixed:o,containerPadding:d,arrowElement:m,popperConfig:p={}}){var s,a,l,b,v;const u=Q(p.modifiers);return Object.assign({},p,{placement:n,enabled:e,strategy:o?"fixed":p.strategy,modifiers:X(Object.assign({},u,{eventListeners:{enabled:t,options:(s=u.eventListeners)==null?void 0:s.options},preventOverflow:Object.assign({},u.preventOverflow,{options:d?Object.assign({padding:d},(a=u.preventOverflow)==null?void 0:a.options):(l=u.preventOverflow)==null?void 0:l.options}),offset:{options:Object.assign({offset:i},(b=u.offset)==null?void 0:b.options)},arrow:Object.assign({},u.arrow,{enabled:!!m,options:Object.assign({},(v=u.arrow)==null?void 0:v.options,{element:m})}),flip:Object.assign({enabled:!!r},u.flip)}))})}export{se as a,j as g,ue as m,oe as u};
