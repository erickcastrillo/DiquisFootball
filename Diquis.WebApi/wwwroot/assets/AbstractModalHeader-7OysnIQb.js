import{o as Ee,c as ve,l as K}from"./listen-DOhMskc_.js";import{c as H}from"./contains-xpjwsOxO.js";import{r as l,j as d,s as be}from"./index-BuddXFJa.js";import{a as X,b as Te}from"./useWindow-CSeaQGg-.js";import{a as xe,u as ye,i as Ce,r as G,h as Re}from"./hasClass-D5wS-QxG.js";import{u as Me}from"./usePrevious-BWh7Y2MO.js";import{u as h}from"./useEventCallback-ddhfBO5d.js";import{s as g}from"./TransitionWrapper-CTn4BG31.js";import{d as ke,q as u}from"./DataKey-COGXBUcQ.js";import{C as we}from"./CloseButton-C9B4ytzo.js";function w(o){o===void 0&&(o=Ee());try{var e=o.activeElement;return!e||!e.nodeName?null:e}catch{return o.body}}function Oe(o=document){const e=o.defaultView;return Math.abs(e.innerWidth-o.documentElement.clientWidth)}const V=ke("modal-open");class N{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}={}){this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Oe(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt(g(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(V,""),g(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(V),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Ae=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Ne(o,e){if(o==null)return{};var t={},n=Object.keys(o),r,a;for(a=0;a<n.length;a++)r=n[a],!(e.indexOf(r)>=0)&&(t[r]=o[r]);return t}let O;function Be(o){return O||(O=new N({ownerDocument:o==null?void 0:o.document})),O}function Le(o){const e=X(),t=o||Be(e),n=l.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>t.add(n.current),remove:()=>t.remove(n.current),isTopModal:()=>t.isTopModal(n.current),setDialogRef:l.useCallback(r=>{n.current.dialog=r},[]),setBackdropRef:l.useCallback(r=>{n.current.backdrop=r},[])})}const Y=l.forwardRef((o,e)=>{let{show:t=!1,role:n="dialog",className:r,style:a,children:b,backdrop:m=!0,keyboard:T=!0,onBackdropClick:B,onEscapeKeyDown:L,transition:q,runTransition:$,backdropTransition:z,runBackdropTransition:J,autoFocus:Q=!0,enforceFocus:Z=!0,restoreFocus:ee=!0,restoreFocusOptions:te,renderDialog:j,renderBackdrop:oe=s=>d.jsx("div",Object.assign({},s)),manager:ne,container:re,onShow:D,onHide:S=()=>{},onExit:se,onExited:W,onExiting:ae,onEnter:ie,onEntering:le,onEntered:de}=o,ce=Ne(o,Ae);const c=X(),p=xe(re),i=Le(ne),ue=Te(),fe=Me(t),[x,F]=l.useState(!t),E=l.useRef(null);l.useImperativeHandle(e,()=>i,[i]),ve&&!fe&&t&&(E.current=w(c==null?void 0:c.document)),t&&x&&F(!1);const I=h(()=>{if(i.add(),R.current=K(document,"keydown",ge),C.current=K(document,"focus",()=>setTimeout(he),!0),D&&D(),Q){var s,_;const k=w((s=(_=i.dialog)==null?void 0:_.ownerDocument)!=null?s:c==null?void 0:c.document);i.dialog&&k&&!H(i.dialog,k)&&(E.current=k,i.dialog.focus())}}),y=h(()=>{if(i.remove(),R.current==null||R.current(),C.current==null||C.current(),ee){var s;(s=E.current)==null||s.focus==null||s.focus(te),E.current=null}});l.useEffect(()=>{!t||!p||I()},[t,p,I]),l.useEffect(()=>{x&&y()},[x,y]),ye(()=>{y()});const he=h(()=>{if(!Z||!ue()||!i.isTopModal())return;const s=w(c==null?void 0:c.document);i.dialog&&s&&!H(i.dialog,s)&&i.dialog.focus()}),me=h(s=>{s.target===s.currentTarget&&(B==null||B(s),m===!0&&S())}),ge=h(s=>{T&&Ce(s)&&i.isTopModal()&&(L==null||L(s),s.defaultPrevented||S())}),C=l.useRef(),R=l.useRef(),pe=(...s)=>{F(!0),W==null||W(...s)};if(!p)return null;const P=Object.assign({role:n,ref:i.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},ce,{style:a,className:r,tabIndex:-1});let M=j?j(P):d.jsx("div",Object.assign({},P,{children:l.cloneElement(b,{role:"document"})}));M=G(q,$,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:se,onExiting:ae,onExited:pe,onEnter:ie,onEntering:le,onEntered:de,children:M});let v=null;return m&&(v=oe({ref:i.setBackdropRef,onClick:me}),v=G(z,J,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:v})),d.jsx(d.Fragment,{children:be.createPortal(d.jsxs(d.Fragment,{children:[v,M]}),p)})});Y.displayName="Modal";const Ye=Object.assign(Y,{Manager:N});function je(o,e){o.classList?o.classList.add(e):Re(o,e)||(typeof o.className=="string"?o.className=o.className+" "+e:o.setAttribute("class",(o.className&&o.className.baseVal||"")+" "+e))}function U(o,e){return o.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function De(o,e){o.classList?o.classList.remove(e):typeof o.className=="string"?o.className=U(o.className,e):o.setAttribute("class",U(o.className&&o.className.baseVal||"",e))}const f={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Se extends N{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,g(t,{[e]:`${parseFloat(g(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];n!==void 0&&(delete t.dataset[e],g(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(je(t,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(t,f.FIXED_CONTENT).forEach(a=>this.adjustAndStore(n,a,e.scrollBarWidth)),u(t,f.STICKY_CONTENT).forEach(a=>this.adjustAndStore(r,a,-e.scrollBarWidth)),u(t,f.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(r,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();De(t,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";u(t,f.FIXED_CONTENT).forEach(a=>this.restore(n,a)),u(t,f.STICKY_CONTENT).forEach(a=>this.restore(r,a)),u(t,f.NAVBAR_TOGGLER).forEach(a=>this.restore(r,a))}}let A;function qe(o){return A||(A=new Se(o)),A}const We=l.createContext({onHide(){}}),$e=l.forwardRef(({closeLabel:o="Close",closeVariant:e,closeButton:t=!1,onHide:n,children:r,...a},b)=>{const m=l.useContext(We),T=h(()=>{m==null||m.onHide(),n==null||n()});return d.jsxs("div",{ref:b,...a,children:[r,t&&d.jsx(we,{"aria-label":o,variant:e,onClick:T})]})});export{$e as A,Ye as B,We as M,Se as a,qe as g};
