import{o as E,a as k,r as q,j as e,L as C,Q as p}from"./index-B9lOP-LQ.js";import{c as A,a as n,F as i}from"./object-C6BzUNZs.js";import{u as B,o as F}from"./yup-BjqEEnFb.js";import{A as I}from"./AccountLayout-ZphjDyi3.js";import"./world-DCpaYJzq.js";import{L as P}from"./LoadingButton-CKSAYktE.js";import{B as T}from"./Button-474b3BA8.js";import"./ElementChildren-C2-i1Qbu.js";import"./Col-C-S0H3jR.js";import"./InputGroupContext-DzKQQVdm.js";import"./logo-CjI6dXrc.js";import"./useAccountLayout-BMnBOVJb.js";import"./Card-CaF0GZJy.js";import"./divWithClassName-_xz-H_CW.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-B3rqXDKQ.js";import"./clsx-CH7BE6MN.js";import"./Button-dKWbp8U8.js";const V=({handleAdminCredentials:t})=>e.jsx("footer",{className:"footer footer-alt p-0",children:e.jsxs("p",{className:"text-muted",children:["Demo Quick Access"," ",e.jsx(T,{variant:"outline-primary",className:"m-2",onClick:t,children:"Admin Credentials"})]})}),O=()=>{const{accountStore:t,tenantsStore:u}=k(),{loadTenantOptions:l,tenantOptions:x,loading:m}=u,h={email:"",password:"",tenant:"root"},g=A({tenant:n().required("Tenant key is required"),email:n().email("Must be a valid email").max(255).required("Email is required"),password:n().min(6,"Password should be of minimum 6 characters length").required("Password is required")}),f=B({defaultValues:h,resolver:F(g)}),{handleSubmit:j,register:o,control:b,setError:d,setValue:y,formState:{errors:w,isValid:N,isSubmitting:c}}=f,v=()=>{r("email","admin@email.com"),r("password","Password123!"),r("tenant","root")},r=(s,a)=>{y(s,a)},L=async s=>{try{await t.login(s),p.success("Logged In Successfully!")}catch(a){const S=(a==null?void 0:a.message)||"Login failed";p.error(S),d("email",{message:"Wrong user credentials"}),d("password",{message:"Wrong user credentials"})}};return q.useEffect(()=>{l()},[l]),e.jsx(I,{bottomLinks:e.jsx(V,{handleAdminCredentials:v}),children:e.jsxs("div",{className:"my-auto",children:[e.jsx("h4",{className:"mt-0",children:"Sign In"}),e.jsx("p",{className:"text-muted mb-4",children:"Enter your email address and password to access account."}),e.jsxs("form",{onSubmit:j(L),noValidate:!0,children:[e.jsx(i,{label:"Email",type:"text",placeholder:"name@example.com",containerClass:"mb-3",register:o,name:"email"}),e.jsx(i,{label:"Password",type:"password",placeholder:"Enter your password",containerClass:"mb-3",register:o,name:"password",children:e.jsx(C,{to:"/forgot-password",className:"text-muted float-end",children:e.jsx("small",{children:"Forgot your password?"})})}),e.jsx("div",{className:"d-grid mb-0 text-center",children:e.jsx(P,{variant:"primary",type:"submit",disabled:!N&&m&&c,loading:m||c,children:e.jsxs("div",{className:"d-flex justify-content-center align-content-center gap-1 mx-auto",children:[e.jsx("i",{className:"mdi mdi-login"}),"Log In"]})})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("small",{className:"d-sm-flex d-none",children:"Specify the tenant with the dropdown. The Nano Boilerplate can resolve tenants by subdomain in real deployments."}),e.jsx(i,{type:"select",label:"Tenant",name:"tenant",containerClass:"mt-1 w-50",register:o,errors:w,control:b,children:x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))},"className")]})]})]})})},ae=E(O);export{ae as default};
