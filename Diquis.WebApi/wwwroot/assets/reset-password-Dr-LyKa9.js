import{_ as D,a as I}from"./logo-Jz-mcktN.js";import{L as M,_ as j,a as z}from"./loading-select-Cfa-dgXS.js";import{u as H,_ as J}from"./loading-button-BPnIwY7F.js";import{c as K,a as d,b as Q}from"./index.esm-DqsvCYYq.js";import{b as W,r as S,c as X,o as Y,d as b,e as Z,f as ee,w as a,g as e,h as t,i as s,m as i,j as m,k as u,t as w}from"./index-BO7LP-gy.js";import{u as te}from"./tenantsStore-CQuAt7j5.js";import{G as se}from"./guest-layout-BYGedb-G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"auth-fluid"},oe={class:"auth-fluid-form-box"},le={class:"card-body d-flex flex-column h-100 gap-3"},ne={class:"auth-brand text-center text-lg-start"},re=e("span",null,[e("img",{src:D,alt:"dark logo"})],-1),de=e("span",null,[e("img",{src:I,alt:"logo"})],-1),ie={class:"my-auto"},me=e("h4",{class:"mt-0"},"Reset Password",-1),ue=e("p",{class:"text-muted mb-4"},"Enter your email with new password and reset token to regain access to your account",-1),ce={class:"d-grid mb-0 text-center"},fe={class:"mt-3"},pe=e("small",{class:"d-sm-flex d-none"}," Specify the tenant with the dropdown. The Nano Boilerplate can resolve tenants by subdomain in real deployments. ",-1),_e={class:"mt-1 w-50"},be={class:"footer footer-alt"},we=e("small",null,"Return to Login",-1),ve=e("div",{class:"auth-fluid-right text-center"},[e("div",{class:"auth-fluid-right__logo"},[e("img",{src:j,alt:"small logo"})]),e("div",{class:"auth-user-testimonial"},[e("img",{src:z,class:"mb-2"}),e("h4",{class:"mb-1"},"Nano ASP.NET Boilerplate"),e("p",{class:"mb-3"},"Vue UI")])],-1),Ae={__name:"reset-password",setup(he){const q=K({email:d().email().required(),password:d().min(8).required(),confirmPassword:d().oneOf([Q("password"),null],"Passwords must match").required(),token:d().required(),tenant:d().required()}),B=W(),T=te(),A=S([]),v=S(!1),{handleSubmit:C,defineField:n,errors:c,meta:N,setFieldValue:E}=H({validationSchema:q}),[h,L]=n("email"),[g,O]=n("password"),[V,$]=n("confirmPassword"),[k,F]=n("token"),[y,R]=n("tenant"),G=X(()=>N.value.dirty&&N.value.valid),P=S(!1),U=C(async r=>{P.value=!0,await B.resetPassword(r),P.value=!1});return Y(async()=>{v.value=!0,await T.getTenantOptions(),A.value=T.tenantOptions.map(r=>({value:r.id,text:r.name})),v.value=!1,E("tenant","root")}),(r,o)=>{const x=b("router-link"),f=b("b-form-input"),p=b("b-form-invalid-feedback"),_=b("b-form-group");return ee(),Z(se,null,{default:a(()=>[e("div",ae,[e("div",oe,[e("div",le,[e("div",ne,[t(x,{to:"/",class:"logo-dark"},{default:a(()=>[re]),_:1}),t(x,{to:"/",class:"logo-light"},{default:a(()=>[de]),_:1})]),e("div",ie,[me,ue,e("form",{onSubmit:o[5]||(o[5]=(...l)=>s(U)&&s(U)(...l))},[t(_,{label:"Email","label-for":"email",class:"mb-3"},{default:a(()=>[t(f,i({type:"email"},s(L),{modelValue:s(h),"onUpdate:modelValue":o[0]||(o[0]=l=>m(h)?h.value=l:null),id:"email",placeholder:"name@example.com"}),null,16,["modelValue"]),t(p,{state:!1},{default:a(()=>[u(w(s(c).email),1)]),_:1})]),_:1}),t(_,{label:"Password","label-for":"password",class:"mb-3"},{default:a(()=>[t(f,i({type:"password"},s(O),{modelValue:s(g),"onUpdate:modelValue":o[1]||(o[1]=l=>m(g)?g.value=l:null),id:"password",placeholder:"Password"}),null,16,["modelValue"]),t(p,{state:!1},{default:a(()=>[u(w(s(c).password),1)]),_:1})]),_:1}),t(_,{label:"Confirm Password","label-for":"confirmPassword",class:"mb-3"},{default:a(()=>[t(f,i({type:"password"},s($),{modelValue:s(V),"onUpdate:modelValue":o[2]||(o[2]=l=>m(V)?V.value=l:null),id:"confirmPassword",placeholder:"Confirm Password"}),null,16,["modelValue"]),t(p,{state:!1},{default:a(()=>[u(w(s(c).confirmPassword),1)]),_:1})]),_:1}),t(_,{label:"Token","label-for":"token",class:"mb-3"},{default:a(()=>[t(f,i({type:"text"},s(F),{modelValue:s(k),"onUpdate:modelValue":o[3]||(o[3]=l=>m(k)?k.value=l:null),id:"token",placeholder:"Enter token from email"}),null,16,["modelValue"]),t(p,{state:!1},{default:a(()=>[u(w(s(c).token),1)]),_:1})]),_:1}),e("div",ce,[t(J,{variant:"primary",type:"submit",disabled:!G.value,loading:P.value},{default:a(()=>[u(" Submit ")]),_:1},8,["disabled","loading"])]),e("div",fe,[pe,e("div",_e,[t(M,i(s(R),{modelValue:s(y),"onUpdate:modelValue":o[4]||(o[4]=l=>m(y)?y.value=l:null),id:"tenant",loading:v.value,options:A.value,label:"Tenant"}),null,16,["modelValue","loading","options"])])])],32)]),e("footer",be,[t(x,{class:"text-muted float-end",to:"/login"},{default:a(()=>[we]),_:1})])])]),ve])]),_:1})}}};export{Ae as default};
