import{c as ee}from"./contains-xpjwsOxO.js";import{r,s as te,u as _,j as v,c as P,t as A,P as ne}from"./index-DZyfIAu_.js";import{b as oe,u as se}from"./useWindow-CPm0dSzS.js";import{u as re,i as ae,a as H,r as ie,h as I}from"./hasClass-C8tlBkMT.js";import{a as ce}from"./hook-BgHE0WuW.js";import{u as B}from"./useMergedRefs-MQSzYiRk.js";import{u as L}from"./useCallbackRef-BbKjLmD3.js";import{u as le,g as ue,a as de,m as fe}from"./mergeOptionsWithPopperConfig-C7d_kRm9.js";import{o as me,l as he}from"./listen-DOhMskc_.js";import{u as z}from"./useEventCallback-hjjgLohZ.js";import{F as K}from"./Fade-6qqgLZnl.js";import{d as S}from"./TransitionWrapper-CsTLgaP5.js";const U=2**31-1;function V(e,t,n){const o=n-Date.now();e.current=o<=U?setTimeout(t,o):setTimeout(()=>V(e,t,n),U)}function pe(){const e=oe(),t=r.useRef();return re(()=>clearTimeout(t.current)),r.useMemo(()=>{const n=()=>clearTimeout(t.current);function o(s,a=0){e()&&(n(),a<=U?t.current=setTimeout(s,a):V(t,s,Date.now()+a))}return{set:o,clear:n}},[])}const ve=()=>{};function ge(e,t,{disabled:n,clickTrigger:o}={}){const s=t||ve;le(e,s,{disabled:n,clickTrigger:o});const a=z(c=>{ae(c)&&s(c)});r.useEffect(()=>{if(n||e==null)return;const c=me(ue(e));let h=(c.defaultView||window).event;const u=he(c,"keyup",f=>{if(f===h){h=void 0;return}a(f)});return()=>{u()}},[e,n,a])}const X=r.forwardRef((e,t)=>{const{flip:n,offset:o,placement:s,containerPadding:a,popperConfig:c={},transition:h,runTransition:u}=e,[f,w]=L(),[O,R]=L(),m=B(w,t),d=H(e.container),T=H(e.target),[i,p]=r.useState(!e.show),l=de(T,f,fe({placement:s,enableEvents:!!e.show,containerPadding:a||5,flip:n,offset:o,arrowElement:O,popperConfig:c}));e.show&&i&&p(!1);const x=(...j)=>{p(!0),e.onExited&&e.onExited(...j)},C=e.show||!i;if(ge(f,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!C)return null;const{onExit:k,onExiting:y,onEnter:E,onEntering:N,onEntered:b}=e;let D=e.children(Object.assign({},l.attributes.popper,{style:l.styles.popper,ref:m}),{popper:l,placement:s,show:!!e.show,arrowProps:Object.assign({},l.attributes.arrow,{style:l.styles.arrow,ref:R})});return D=ie(h,u,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:D,onExit:k,onExiting:y,onExited:x,onEnter:E,onEntering:N,onEntered:b}),d?te.createPortal(D,d):null});X.displayName="Overlay";const Y=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=_(t,"popover-header"),v.jsx(n,{ref:s,className:P(e,t),...o})));Y.displayName="PopoverHeader";const $=r.forwardRef(({className:e,bsPrefix:t,as:n="div",...o},s)=>(t=_(t,"popover-body"),v.jsx(n,{ref:s,className:P(e,t),...o})));$.displayName="PopoverBody";function q(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function G(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const we=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,body:a,arrowProps:c,hasDoneInitialMeasure:h,popper:u,show:f,...w},O)=>{const R=_(e,"popover"),m=A(),[d]=(t==null?void 0:t.split("-"))||[],T=q(d,m);let i=o;return f&&!h&&(i={...o,...G(u==null?void 0:u.strategy)}),v.jsxs("div",{ref:O,role:"tooltip",style:i,"x-placement":d,className:P(n,R,d&&`bs-popover-${T}`),...w,children:[v.jsx("div",{className:"popover-arrow",...c}),a?v.jsx($,{children:s}):s]})}),Oe=Object.assign(we,{Header:Y,Body:$,POPPER_OFFSET:[0,8]}),J=r.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:o,children:s,arrowProps:a,hasDoneInitialMeasure:c,popper:h,show:u,...f},w)=>{e=_(e,"tooltip");const O=A(),[R]=(t==null?void 0:t.split("-"))||[],m=q(R,O);let d=o;return u&&!c&&(d={...o,...G(h==null?void 0:h.strategy)}),v.jsxs("div",{ref:w,style:d,role:"tooltip","x-placement":R,className:P(n,e,`bs-tooltip-${m}`),...f,children:[v.jsx("div",{className:"tooltip-arrow",...a}),v.jsx("div",{className:`${e}-inner`,children:s})]})});J.displayName="Tooltip";const Re=Object.assign(J,{TOOLTIP_OFFSET:[0,6]});function ye(e){const t=r.useRef(null),n=_(void 0,"popover"),o=_(void 0,"tooltip"),s=r.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(I(t.current,n))return Oe.POPPER_OFFSET;if(I(t.current,o))return Re.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,o]);return[t,[s]]}function Ee(e,t){const{ref:n}=e,{ref:o}=t;e.ref=n.__wrapped||(n.__wrapped=s=>n(S(s))),t.ref=o.__wrapped||(o.__wrapped=s=>o(S(s)))}const Q=r.forwardRef(({children:e,transition:t=K,popperConfig:n={},rootClose:o=!1,placement:s="top",show:a=!1,...c},h)=>{const u=r.useRef({}),[f,w]=r.useState(null),[O,R]=ye(c.offset),m=B(h,O),d=t===!0?K:t||void 0,T=z(i=>{w(i),n==null||n.onFirstUpdate==null||n.onFirstUpdate(i)});return se(()=>{f&&c.target&&(u.current.scheduleUpdate==null||u.current.scheduleUpdate())},[f,c.target]),r.useEffect(()=>{a||w(null)},[a]),v.jsx(X,{...c,ref:m,popperConfig:{...n,modifiers:R.concat(n.modifiers||[]),onFirstUpdate:T},transition:d,rootClose:o,placement:s,show:a,children:(i,{arrowProps:p,popper:l,show:x})=>{var C,k;Ee(i,p);const y=l==null?void 0:l.placement,E=Object.assign(u.current,{state:l==null?void 0:l.state,scheduleUpdate:l==null?void 0:l.update,placement:y,outOfBoundaries:(l==null||(C=l.state)==null||(k=C.modifiersData.hide)==null?void 0:k.isReferenceHidden)||!1,strategy:n.strategy}),N=!!f;return typeof e=="function"?e({...i,placement:y,show:x,...!t&&x&&{className:"show"},popper:E,arrowProps:p,hasDoneInitialMeasure:N}):r.cloneElement(e,{...i,placement:y,arrowProps:p,popper:E,hasDoneInitialMeasure:N,className:P(e.props.className,!t&&x&&"show"),style:{...e.props.style,...i.style}})}})});Q.displayName="Overlay";function Te(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function W(e,t,n){const[o]=t,s=o.currentTarget,a=o.relatedTarget||o.nativeEvent[n];(!a||a!==s)&&!ee(s,a)&&e(...t)}ne.oneOf(["click","hover","focus"]);const Ue=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:o={},show:s,defaultShow:a=!1,onToggle:c,delay:h,placement:u,flip:f=u&&u.indexOf("auto")!==-1,...w})=>{const O=r.useRef(null),R=B(O,n.ref),m=pe(),d=r.useRef(""),[T,i]=ce(s,a,c),p=Te(h),{onFocus:l,onBlur:x,onClick:C}=typeof n!="function"?r.Children.only(n).props:{},k=g=>{R(S(g))},y=r.useCallback(()=>{if(m.clear(),d.current="show",!p.show){i(!0);return}m.set(()=>{d.current==="show"&&i(!0)},p.show)},[p.show,i,m]),E=r.useCallback(()=>{if(m.clear(),d.current="hide",!p.hide){i(!1);return}m.set(()=>{d.current==="hide"&&i(!1)},p.hide)},[p.hide,i,m]),N=r.useCallback((...g)=>{y(),l==null||l(...g)},[y,l]),b=r.useCallback((...g)=>{E(),x==null||x(...g)},[E,x]),D=r.useCallback((...g)=>{i(!T),C==null||C(...g)},[C,i,T]),j=r.useCallback((...g)=>{W(y,g,"fromElement")},[y]),Z=r.useCallback((...g)=>{W(E,g,"toElement")},[E]),M=e==null?[]:[].concat(e),F={ref:k};return M.indexOf("click")!==-1&&(F.onClick=D),M.indexOf("focus")!==-1&&(F.onFocus=N,F.onBlur=b),M.indexOf("hover")!==-1&&(F.onMouseOver=j,F.onMouseOut=Z),v.jsxs(v.Fragment,{children:[typeof n=="function"?n(F):r.cloneElement(n,F),v.jsx(Q,{...w,show:T,onHide:E,flip:f,placement:u,popperConfig:o,target:O.current,children:t})]})};export{Ue as O,Oe as P,Re as T};
