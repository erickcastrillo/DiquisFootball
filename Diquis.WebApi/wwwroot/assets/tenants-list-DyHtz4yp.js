import{_ as te}from"./layout-XCMcHSfz.js";import{u as K}from"./tenantsStore-CQuAt7j5.js";import{_ as le,a as oe}from"./active-badge-DGboKqOr.js";import{d as ne,A as se}from"./avatar-title-group-BK_MrQxr.js";import{u as L,_ as Q}from"./loading-button-BPnIwY7F.js";import{c as W,a as B,d as de}from"./index.esm-DqsvCYYq.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as w,c as J,d as n,e as F,f as y,w as t,g as v,i as a,h as e,m as C,j as S,k as m,t as D,p as ie,n as re,l as O,v as Y,F as Z,G,o as ue}from"./index-BO7LP-gy.js";import"./logo-Jz-mcktN.js";const me=l=>(ie("data-v-31fe958e"),l=l(),re(),l),ce={class:"form-layout"},fe={class:"modal-footer footer-controls border-top-0"},pe=me(()=>v("div",{class:"footer-controls__left"},null,-1)),_e={class:"footer-controls__right"},be={__name:"edit-tenant-modal",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1}},emits:["proceed","cancel"],setup(l,{emit:g}){var H,M;const i=g,r=l,f=w({name:((H=r.data)==null?void 0:H.name)||"",isActive:((M=r.data)==null?void 0:M.isActive)||!1}),A=W({isActive:de().required(),name:B().required()}),{handleSubmit:c,defineField:s,errors:p,meta:_}=L({initialValues:f,validationSchema:A}),[b,k]=s("isActive"),[U,P]=s("name"),R=J(()=>_.value.dirty&&_.value.valid),h=w(!0),T=async()=>{h.value=!1,i("cancel")},x=c($=>{let d={...r.data,...$};i("proceed",d)});return($,d)=>{const q=n("b-form-checkbox"),j=n("b-form-input"),o=n("b-form-invalid-feedback"),E=n("b-form-group"),I=n("b-button"),N=n("b-modal");return y(),F(N,{id:"standard-modal",modelValue:h.value,"onUpdate:modelValue":d[3]||(d[3]=V=>h.value=V),title:"Edit Tenant","title-class":"h4",size:"lg",loading:l.loading,"hide-footer":"",onCancel:T,onClose:T,onHidden:T},{default:t(()=>[v("form",{onSubmit:d[2]||(d[2]=(...V)=>a(x)&&a(x)(...V))},[v("div",ce,[e(q,C(a(k),{modelValue:a(b),"onUpdate:modelValue":d[0]||(d[0]=V=>S(b)?b.value=V:null),switch:""}),{default:t(()=>[m(" Is Active")]),_:1},16,["modelValue"]),e(E,{label:"Name","label-for":"name"},{default:t(()=>[e(j,C({type:"text"},a(P),{modelValue:a(U),"onUpdate:modelValue":d[1]||(d[1]=V=>S(U)?U.value=V:null)}),null,16,["modelValue"]),e(o,{state:!1},{default:t(()=>[m(D(a(p).name),1)]),_:1})]),_:1})])],32),v("div",fe,[pe,v("div",_e,[e(I,{variant:"light",onClick:T},{default:t(()=>[m("Close")]),_:1}),e(Q,{variant:"primary",type:"submit",loading:l.loading,onClick:a(x),disabled:!R.value},{default:t(()=>[m("Save")]),_:1},8,["loading","onClick","disabled"])])])]),_:1},8,["modelValue","loading"])}}},ve=X(be,[["__scopeId","data-v-31fe958e"]]),ge={key:1,class:"float-end text-primary"},Ve={__name:"edit-tenant",props:["targetTenant"],setup(l){const g=K(),i=l,r=w(!1),f=w(!1),A=async s=>{f.value=!0,await g.updateTenant(s)&&(r.value=!1),f.value=!1},c=J(()=>i.targetTenant.id!="root");return(s,p)=>{const _=n("b-button");return y(),O(Z,null,[c.value?(y(),F(_,{key:0,variant:"soft-primary",pill:"",onClick:p[0]||(p[0]=b=>r.value=!0),class:"float-end"},{default:t(()=>[m("Edit")]),_:1})):(y(),O("strong",ge,"N/A")),r.value?(y(),F(ve,{key:2,loading:f.value,data:i.targetTenant,onProceed:A,onCancel:p[1]||(p[1]=b=>r.value=!1)},null,8,["loading","data"])):Y("",!0)],64)}}},z=ne(),we=[z.accessor("name",{label:()=>"Name",enableSorting:!0,cell:({row:l})=>G(se,{title:l.original.name,hideAvatar:!0})}),z.accessor("id",{label:"Id",enableSorting:!0}),z.accessor("isActive",{label:"Active",enableSorting:!0,size:30,cell:({row:l})=>G(le,{isActive:l.original.isActive})}),z.accessor("id",{label:"",enableSorting:!1,cell:({row:l})=>G(Ve,{targetTenant:l.original})})],ye={class:"form-layout"},Ae={class:"modal-footer border-top-0"},ke={__name:"register-tenant-modal",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1}},emits:["proceed","cancel"],setup(l,{emit:g}){const i=g,r=w({id:"",name:"",adminEmail:"",password:"Password123!"}),f=W({id:B().required(),name:B().required(),adminEmail:B().email().required(),password:B().required()}),{handleSubmit:A,defineField:c,errors:s,meta:p}=L({initialValues:r,validationSchema:f}),[_,b]=c("id"),[k,U]=c("name"),[P,R]=c("adminEmail"),[h,T]=c("password"),[x,H]=c("hasIsolatedDatabase"),M=J(()=>p.value.dirty&&p.value.valid),$=w(!0),d=async()=>{$.value=!1,i("cancel")},q=A(j=>{i("proceed",j)});return(j,o)=>{const E=n("b-form-input"),I=n("b-form-invalid-feedback"),N=n("b-form-group"),V=n("b-form-checkbox"),ee=n("b-button"),ae=n("b-modal");return y(),F(ae,{id:"standard-modal",modelValue:$.value,"onUpdate:modelValue":o[6]||(o[6]=u=>$.value=u),title:"Register New Tenant","title-class":"h4",size:"lg","hide-footer":"",onCancel:d,onClose:d,onHidden:d},{default:t(()=>[v("form",{onSubmit:o[5]||(o[5]=(...u)=>a(q)&&a(q)(...u))},[v("div",ye,[e(N,{label:"Id","label-for":"id"},{default:t(()=>[e(E,C({type:"text"},a(b),{modelValue:a(_),"onUpdate:modelValue":o[0]||(o[0]=u=>S(_)?_.value=u:null),id:"id",placeholder:"Tenant Id"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).id),1)]),_:1})]),_:1}),e(N,{label:"Name","label-for":"name"},{default:t(()=>[e(E,C({type:"text"},a(U),{modelValue:a(k),"onUpdate:modelValue":o[1]||(o[1]=u=>S(k)?k.value=u:null),id:"name",placeholder:"Name"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).name),1)]),_:1})]),_:1}),e(N,{label:"Admin Email","label-for":"adminEmail"},{default:t(()=>[e(E,C({type:"text"},a(R),{modelValue:a(P),"onUpdate:modelValue":o[2]||(o[2]=u=>S(P)?P.value=u:null),id:"adminEmail",placeholder:"name@example.com"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).adminEmail),1)]),_:1})]),_:1}),e(N,{label:"Password","label-for":"password"},{default:t(()=>[e(E,C({type:"text"},a(T),{modelValue:a(h),"onUpdate:modelValue":o[3]||(o[3]=u=>S(h)?h.value=u:null),id:"password",placeholder:"Password"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).password),1)]),_:1})]),_:1}),e(V,C(a(H),{modelValue:a(x),"onUpdate:modelValue":o[4]||(o[4]=u=>S(x)?x.value=u:null),switch:""}),{default:t(()=>[m("Isolated Database")]),_:1},16,["modelValue"])])],32),v("div",Ae,[e(ee,{variant:"light",onClick:d},{default:t(()=>[m("Close")]),_:1}),e(Q,{variant:"primary",type:"submit",loading:l.loading,onClick:a(q),disabled:!M.value},{default:t(()=>[m("Save")]),_:1},8,["loading","onClick","disabled"])])]),_:1},8,["modelValue"])}}},he=X(ke,[["__scopeId","data-v-19583ce0"]]),xe=v("div",{class:"mb-2"},[v("small",null,"Client-side pagination with sorting & filtering")],-1),qe={__name:"tenants-list",setup(l){const g=K(),i=w(!1),r=w(!1),f=w(!1);ue(async()=>{r.value=!0,await g.getTenants(),r.value=!1});const A=async c=>{f.value=!0,await g.addTenant(c)&&(i.value=!1),f.value=!1};return(c,s)=>{const p=n("b-button"),_=n("b-col"),b=n("b-row");return y(),O(Z,null,[e(te,null,{default:t(()=>[e(b,null,{default:t(()=>[e(_,{class:"d-flex flex-row-reverse mb-3"},{default:t(()=>[e(p,{variant:"primary",onClick:s[0]||(s[0]=k=>i.value=!i.value)},{default:t(()=>[m("New Tenant")]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(_,null,{default:t(()=>[e(oe,{data:a(g).tenants,columns:a(we),loading:r.value,filterPlaceholder:"Search Tenants..."},null,8,["data","columns","loading"]),xe]),_:1})]),_:1})]),_:1}),i.value?(y(),F(he,{key:0,loading:f.value,onProceed:A,onCancel:s[1]||(s[1]=k=>i.value=!0)},null,8,["loading"])):Y("",!0)],64)}}};export{qe as default};
