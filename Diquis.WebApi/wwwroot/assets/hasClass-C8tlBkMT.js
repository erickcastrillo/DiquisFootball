import{r,j as c}from"./index-DZyfIAu_.js";import{c as E,o as j}from"./listen-DOhMskc_.js";import{a as v,u as l}from"./useWindow-CPm0dSzS.js";import{u as b}from"./useMergedRefs-MQSzYiRk.js";import{u as g}from"./useEventCallback-hjjgLohZ.js";import{N as h}from"./NoopTransition-9eZ7ujJa.js";function y(e){const n=r.useRef(e);return n.current=e,n}function M(e){const n=y(e);r.useEffect(()=>()=>n.current(),[])}const f=(e,n)=>E?e==null?(n||j()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function W(e,n){const t=v(),[s,u]=r.useState(()=>f(e,t==null?void 0:t.document));if(!s){const i=f(e);i&&u(i)}return r.useEffect(()=>{},[n,s]),r.useEffect(()=>{const i=f(e);i!==s&&u(i)},[e,s]),s}function O({in:e,onTransition:n}){const t=r.useRef(null),s=r.useRef(!0),u=g(n);return l(()=>{if(!t.current)return;let i=!1;return u({in:e,element:t.current,initial:s.current,isStale:()=>i}),()=>{i=!0}},[e,u]),l(()=>(s.current=!1,()=>{s.current=!0}),[]),t}function T({children:e,in:n,onExited:t,onEntered:s,transition:u}){const[i,a]=r.useState(!n);n&&i&&a(!1);const m=O({in:!!n,onTransition:o=>{const R=()=>{o.isStale()||(o.in?s==null||s(o.element,o.initial):(a(!0),t==null||t(o.element)))};Promise.resolve(u(o)).then(R,x=>{throw o.in||a(!0),x})}}),d=b(m,e.ref);return i&&!n?null:r.cloneElement(e,{ref:d})}function k(e,n,t){return e?c.jsx(e,Object.assign({},t)):n?c.jsx(T,Object.assign({},t,{transition:n})):c.jsx(h,Object.assign({},t))}function F(e){return e.code==="Escape"||e.keyCode===27}function L(e,n){return e.classList?!!n&&e.classList.contains(n):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")!==-1}export{W as a,L as h,F as i,k as r,M as u};
