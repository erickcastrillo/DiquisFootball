import{_ as H}from"./layout-XCMcHSfz.js";import{_ as J,m as K}from"./menu-options-A1bwnQrU.js";import{u as M,_ as Q}from"./loading-button-BPnIwY7F.js";import{a as W,c as X,r as B,d as S,e as Y,f as v,w as o,g as a,h as t,i as e,l as k,v as Z,t as m,m as b,j as h,k as u,p as ee,n as ae}from"./index-BO7LP-gy.js";import{c as te,a as U}from"./index.esm-DqsvCYYq.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo-Jz-mcktN.js";const C=c=>(ee("data-v-c8d8ae7c"),c=c(),ae(),c),se={class:"page-nav-layout"},oe={class:"page-nav-layout__nav-area"},ie={class:"page-nav-layout__content"},re={class:"card"},ne={class:"card-body"},me=C(()=>a("div",{class:"form-block-title"},"Edit your profile",-1)),de={class:"profile-avatar profile-avatar--large mb-2"},ue={class:"profile-avatar__image-area"},ce={key:0,class:"mdi mdi-account-outline"},pe=["src"],_e={key:2,class:"spinner-border avatar text-primary",role:"status","aria-hidden":"true"},fe={class:"profile-avatar__cta"},ve=C(()=>a("i",{class:"mdi mdi-camera"},null,-1)),be={class:"profile-avatar__title-group"},he={class:"profile-avatar__title-group__title text-capitalize",id:"nameDisplay"},Ne={class:"profile-avatar__title-group__sub text-capitalize",id:"roleDisplay"},ge=C(()=>a("div",{class:"spinner-border text-primary",style:{display:"none",position:"absolute",top:"0",right:"0"},id:"uploadImageSubmitSpinner"},null,-1)),ye={class:"form-layout__controls"},Ve={__name:"profile",setup(c){var F,P,$,q;const s=W(),E={email:(F=s.user)==null?void 0:F.email,firstName:(P=s.user)==null?void 0:P.firstName,lastName:($=s.user)==null?void 0:$.lastName,phoneNumber:(q=s.user)==null?void 0:q.phoneNumber},D=te({email:U().email().required(),firstName:U().required(),lastName:U().required()}),{handleSubmit:L,defineField:p,errors:_,meta:w}=M({initialValues:E,validationSchema:D}),[N,z]=p("firstName"),[g,R]=p("lastName"),[y,j]=p("email"),[V,O]=p("phoneNumber"),T=X(()=>w.value.dirty&&w.value.valid),x=B(!1),A=L(async f=>{x.value=!0;try{await s.updateCurrentUser(f)}catch{console.log("error occured")}finally{x.value=!1}}),I=B(!1),G=async f=>{var r,n;const d={ImageFile:(n=(r=f.target)==null?void 0:r.files)==null?void 0:n[0]};I.value=!0,await s.updateProfileImage(d),I.value=!1};return(f,l)=>{const d=S("b-form-input"),r=S("b-form-invalid-feedback"),n=S("b-form-group");return v(),Y(H,null,{default:o(()=>[a("div",se,[a("div",oe,[t(J,{"menu-options":e(K)},null,8,["menu-options"])]),a("div",ie,[a("div",re,[a("div",ne,[me,a("div",de,[a("div",ue,[e(s).user.imageUrl?(v(),k("img",{key:1,src:e(s).user.imageUrl,id:"profileImage"},null,8,pe)):(v(),k("i",ce)),I.value?(v(),k("span",_e)):Z("",!0)]),a("label",fe,[ve,a("input",{type:"file",style:{display:"none"},id:"profileImageInput",onChange:G},null,32)]),a("div",be,[a("div",he,m(e(s).user.firstName)+" "+m(e(s).user.lastName),1),a("div",Ne,m(e(s).user.roleId)+" Level User",1)]),ge]),a("form",{class:"form-layout",onSubmit:l[4]||(l[4]=(...i)=>e(A)&&e(A)(...i))},[t(n,{label:"First Name","label-for":"firstName",class:"mb-2"},{default:o(()=>[t(d,b({type:"text",placeholder:"First name"},e(z),{modelValue:e(N),"onUpdate:modelValue":l[0]||(l[0]=i=>h(N)?N.value=i:null),id:"firstName"}),null,16,["modelValue"]),t(r,{state:!1},{default:o(()=>[u(m(e(_).firstName),1)]),_:1})]),_:1}),t(n,{label:"Last name","label-for":"lastName",class:"mb-2"},{default:o(()=>[t(d,b({type:"text",placeholder:"Last name"},e(R),{modelValue:e(g),"onUpdate:modelValue":l[1]||(l[1]=i=>h(g)?g.value=i:null),id:"lastName"}),null,16,["modelValue"]),t(r,{state:!1},{default:o(()=>[u(m(e(_).lastName),1)]),_:1})]),_:1}),t(n,{label:"Email","label-for":"email",class:"mb-2"},{default:o(()=>[t(d,b({type:"email",placeholder:"Email"},e(j),{modelValue:e(y),"onUpdate:modelValue":l[2]||(l[2]=i=>h(y)?y.value=i:null),id:"email"}),null,16,["modelValue"]),t(r,{state:!1},{default:o(()=>[u(m(e(_).email),1)]),_:1})]),_:1}),t(n,{label:"Phone number","label-for":"phoneNumber",class:"mb-2"},{default:o(()=>[t(d,b({type:"text",placeholder:"Phone number"},e(O),{modelValue:e(V),"onUpdate:modelValue":l[3]||(l[3]=i=>h(V)?V.value=i:null),id:"phoneNumber"}),null,16,["modelValue"]),t(r,{state:!1},{default:o(()=>[u(m(e(_).phoneNumber),1)]),_:1})]),_:1}),a("div",ye,[t(Q,{variant:"primary",type:"submit",disabled:!T.value,loading:x.value},{default:o(()=>[u("Save Changes")]),_:1},8,["disabled","loading"])])],32)])])])])]),_:1})}}},Ae=le(Ve,[["__scopeId","data-v-c8d8ae7c"]]);export{Ae as default};
