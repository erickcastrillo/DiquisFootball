import{_ as M,a as j}from"./logo-Jz-mcktN.js";import{L as z,_ as H,a as J}from"./loading-select-Cfa-dgXS.js";import{u as K,a as Q,b as W,r as v,c as X,o as Y,d as n,e as Z,f as tt,w as s,g as t,h as e,i as a,m as w,j as x,k as i,t as q}from"./index-BO7LP-gy.js";import{u as et,_ as st}from"./loading-button-BPnIwY7F.js";import{c as at,a as y}from"./index.esm-DqsvCYYq.js";import{u as ot}from"./tenantsStore-CQuAt7j5.js";import{G as lt}from"./guest-layout-BYGedb-G.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const nt={class:"auth-fluid"},rt={class:"auth-fluid-form-box"},it={class:"card-body d-flex flex-column h-100 gap-3"},dt={class:"auth-brand text-center text-lg-start"},ut=t("span",null,[t("img",{src:M,alt:"dark logo"})],-1),ct=t("span",null,[t("img",{src:j,alt:"logo"})],-1),mt={class:"my-auto"},_t=t("h4",{class:"mt-0"},"Sign In",-1),pt=t("p",{class:"text-muted mb-4"},"Enter your email address and password to access account.",-1),ft=t("small",null,"Forgot your password?",-1),bt={class:"d-grid mb-0 text-center"},gt=t("i",{class:"mdi mdi-login"},null,-1),ht={class:"mt-3"},vt=t("small",{class:"d-sm-flex d-none"}," Specify the tenant with the dropdown. The Nano Boilerplate can resolve tenants by subdomain in real deployments. ",-1),wt={class:"mt-1 w-50"},xt={class:"footer footer-alt"},yt={class:"text-muted"},St=t("div",{class:"auth-fluid-right text-center"},[t("div",{class:"auth-fluid-right__logo"},[t("img",{src:H,alt:"small logo"})]),t("div",{class:"auth-user-testimonial"},[t("img",{src:J,class:"mb-2"}),t("h4",{class:"mb-1"},"Nano ASP.NET Boilerplate"),t("p",{class:"mb-3"},"Vue UI")])],-1),Ft={__name:"login",setup(Vt){const d=K(),B=Q(),F=W(),S=ot(),V=v([]),u=v(!1),U=at({email:y().email().required(),password:y().required(),tenant:y().required()}),{handleSubmit:L,defineField:c,errors:k,meta:A,setFieldValue:m}=et({validationSchema:U}),[_,E]=c("email"),[p,I]=c("password"),[f,O]=c("tenant"),R=X(()=>A.value.dirty&&A.value.valid),b=v(!1),P=L(async r=>{b.value=!0,await F.login(r)&&(await B.getCurrentUser(),g?d.push(g):d.push("/")),b.value=!1});let g=null;Y(async()=>{g=d.currentRoute.value.query.redirectFrom,u.value=!0,await S.getTenantOptions(),V.value=S.tenantOptions.map(r=>({value:r.id,text:r.name})),u.value=!1,m("tenant","root")});const $=()=>{m("email","admin@email.com"),m("password","Password123!")};return(r,o)=>{const h=n("router-link"),T=n("b-form-input"),C=n("b-form-invalid-feedback"),N=n("b-form-group"),D=n("b-row"),G=n("b-button");return tt(),Z(lt,null,{default:s(()=>[t("div",nt,[t("div",rt,[t("div",it,[t("div",dt,[e(h,{to:"/",class:"logo-dark"},{default:s(()=>[ut]),_:1}),e(h,{to:"/",class:"logo-light"},{default:s(()=>[ct]),_:1})]),t("div",mt,[_t,pt,t("form",{onSubmit:o[3]||(o[3]=(...l)=>a(P)&&a(P)(...l))},[e(N,{label:"Email","label-for":"email",class:"mb-3"},{default:s(()=>[e(T,w({type:"text"},a(E),{modelValue:a(_),"onUpdate:modelValue":o[0]||(o[0]=l=>x(_)?_.value=l:null),id:"email",placeholder:"name@example.com"}),null,16,["modelValue"]),e(C,{state:!1},{default:s(()=>[i(q(a(k).email),1)]),_:1})]),_:1}),e(N,{label:"Password","label-for":"password"},{default:s(()=>[e(T,w({type:"password"},a(I),{modelValue:a(p),"onUpdate:modelValue":o[1]||(o[1]=l=>x(p)?p.value=l:null),id:"password",placeholder:"Password"}),null,16,["modelValue"]),e(C,{state:!1},{default:s(()=>[i(q(a(k).password),1)]),_:1})]),_:1}),e(D,{"align-h":"end",class:"mb-3"},{default:s(()=>[e(h,{to:"/forgot-password",class:"vf-link-subtext"},{default:s(()=>[ft]),_:1})]),_:1}),t("div",bt,[e(st,{variant:"primary",type:"submit",disabled:!R.value,loading:b.value},{default:s(()=>[gt,i(" Log In ")]),_:1},8,["disabled","loading"])]),t("div",ht,[vt,t("div",wt,[e(z,w(a(O),{modelValue:a(f),"onUpdate:modelValue":o[2]||(o[2]=l=>x(f)?f.value=l:null),id:"tenant",loading:u.value,options:V.value,label:"Tenant"}),null,16,["modelValue","loading","options"])])])],32)]),t("footer",xt,[t("p",yt,[i("Demo quick access "),e(G,{variant:"outline-primary",class:"m-2",onClick:$},{default:s(()=>[i("Admin Credentials")]),_:1})])])])]),St])]),_:1})}}};export{Ft as default};
