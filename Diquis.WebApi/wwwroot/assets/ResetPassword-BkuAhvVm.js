import{o as S,a as C,r as o,j as e,Q as d,L as v}from"./index-BuddXFJa.js";import{u as q,o as E}from"./yup-4rNH33YR.js";import{c as L,a as r,F as a}from"./object-D5dWmyPz.js";import{A as T}from"./AccountLayout-Bebrbq8G.js";import"./world-6iAZiOYV.js";import{c as B}from"./checkPasswordStrength-BI5JvUYW.js";import{P as R}from"./ProgressBar-DGxCV-gN.js";import{B as F}from"./Button-DlzCx1S-.js";import"./ElementChildren-CLZbOutP.js";import"./Col-CHpB3Dvb.js";import"./InputGroupContext-geSFbXYA.js";import"./logo-CB5ymzH_.js";import"./useAccountLayout-CTTgLTao.js";import"./Card-iRK5woST.js";import"./divWithClassName-Cv15O8OV.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-DfXNGSKl.js";import"./clsx-CH7BE6MN.js";import"./Button-_NMu-vvO.js";const A=()=>e.jsx("footer",{className:"footer footer-alt",children:e.jsx("small",{className:"text-muted",children:e.jsx(v,{to:"/login",className:"text-muted ms-1",children:"Return to Login"})})}),O=()=>{const{accountStore:c,tenantsStore:p}=C(),{loadTenantOptions:i,tenantOptions:u,loading:h}=p,[w,x]=o.useState(0),f={email:"demo@example.com",token:"",password:"",confirmPassword:"",tenant:"root"},b=L({email:r().email("Must be a valid email").max(255).required("Email is required"),token:r().required("Token is required!"),password:r().required("New password is required!"),confirmPassword:r().required("Confirm new password is required!"),tenant:r().required("Tenant key is required")}),j=q({defaultValues:f,resolver:E(b)}),{handleSubmit:P,register:t,control:g,formState:{errors:y},watch:N}=j,m=N("password"),k=async s=>{const n=await c.forgotPassword(s);(n==null?void 0:n.succeeded)===!0?d.success("Password reset email sent"):d.error("Could not send email")},l=o.useCallback(()=>{const s=B(m,{checkFor:["length","lowerCase","upperCase","number","specialCharacter"]}).strength;x(s)},[m]);return o.useEffect(()=>{l()},[l]),o.useEffect(()=>{i()},[i]),e.jsx(T,{bottomLinks:e.jsx(A,{}),children:e.jsxs("div",{className:"my-auto",children:[e.jsx("h4",{className:"mt-0",children:"Reset Password"}),e.jsx("p",{className:"text-muted mb-4",children:"Enter your email with new password and reset token to regain access to your account."}),e.jsxs("form",{onSubmit:P(k),noValidate:!0,children:[e.jsx(a,{label:"Email",type:"text",placeholder:"name@example.com",containerClass:"mb-3",register:t,name:"email"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(a,{label:"Password",type:"password",placeholder:"Password",register:t,name:"password"}),e.jsx(R,{now:w,className:"progress-sm mt-1"})]}),e.jsx(a,{label:"Confirm Password",type:"password",placeholder:"Password",containerClass:"mb-3",register:t,name:"confirmPassword"}),e.jsx(a,{label:"Token",type:"text",placeholder:"Enter token from Email",containerClass:"mb-3",register:t,name:"token"}),e.jsx("div",{className:"d-grid mb-0 text-center",children:e.jsx(F,{variant:"primary",type:"submit",disabled:h,children:"Submit"})}),e.jsxs("div",{className:"mt-3",children:[e.jsx("small",{className:"d-sm-flex d-none",children:"Specify the tenant with the dropdown. The Nano Boilerplate can resolve tenants by subdomain in real deployments."}),e.jsx(a,{type:"select",label:"Tenant",name:"tenant",containerClass:"mt-1 w-50",register:t,errors:y,control:g,children:u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))},"className")]})]})]})})},te=S(O);export{te as default};
