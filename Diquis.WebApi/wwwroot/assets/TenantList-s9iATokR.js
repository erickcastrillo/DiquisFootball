import{o as w,a as M,r as x,j as e,Q as b}from"./index-B9lOP-LQ.js";import{c as P}from"./clsx-CH7BE6MN.js";import{u as I,M as D,g as $}from"./index-CuAXanPx.js";import{c as k,a as c,b as K,F as o}from"./object-C6BzUNZs.js";import{u as L,o as R}from"./yup-BjqEEnFb.js";import"./world-DCpaYJzq.js";import{L as B}from"./LoadingButton-CKSAYktE.js";import{M as N}from"./Modal-B-wCig5c.js";import{R as C}from"./Row-Bt1Diq2_.js";import{C as l}from"./Col-C-S0H3jR.js";import{B as A}from"./Button-474b3BA8.js";import{C as O}from"./ClientTable-D9B5AJGL.js";import{P as V}from"./PageLayout-BwASRJfk.js";import{C as E}from"./Card-CaF0GZJy.js";import"./ElementChildren-C2-i1Qbu.js";import"./InputGroupContext-DzKQQVdm.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-B3rqXDKQ.js";import"./listen-DOhMskc_.js";import"./useCallbackRef-B-qOTvYu.js";import"./useEventCallback-B-qJwqMD.js";import"./useMergedRefs-DJgFqpix.js";import"./hasClass-C7eJW1sn.js";import"./useWindow-BKmZcn0M.js";import"./NoopTransition-Bi7248SM.js";import"./TransitionWrapper-BLPpPSai.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./AbstractModalHeader-CEqb6A66.js";import"./contains-xpjwsOxO.js";import"./usePrevious-mZ2y6jh4.js";import"./DataKey-COGXBUcQ.js";import"./CloseButton-BF3uFok-.js";import"./Fade-Dtw2Fl4v.js";import"./divWithClassName-_xz-H_CW.js";import"./Button-dKWbp8U8.js";import"./simplebar-react.esm-bGe56t2G.js";import"./index-CF5aMJY4.js";const z=({show:a,onHide:s,data:t})=>{const{tenantsStore:n}=M(),{updateTenant:r,loading:m}=n,p=x.useMemo(()=>({id:t.id,name:t.name,isActive:t.isActive,createdOn:t.createdOn}),[t]),d=k({name:c().required("Tenant name is required"),id:c().default(t.id),isActive:K().default(t.isActive),createdOn:c().default(t.createdOn)}),{reset:i,register:j,handleSubmit:y,formState:{isDirty:S,isValid:f,isSubmitting:g}}=L({defaultValues:p,resolver:R(d)}),T=()=>{i(),s()},v=async h=>{try{await r(h),s(),i(),b.info("Tenant Edited Successfully")}catch(u){const F=u==null?void 0:u.message;b.error(F)}};return e.jsxs(N,{show:a,onHide:T,size:"lg",centered:!0,children:[e.jsx(N.Header,{closeButton:!0,children:e.jsx("h2",{className:"mb-2 fs-3",children:"Edit Tenant"})}),e.jsx(N.Body,{children:e.jsxs("form",{onSubmit:y(v),children:[e.jsxs(C,{className:"mt-1",children:[e.jsx(l,{className:"mt-2",xs:7,children:e.jsx(o,{type:"text",placeholder:"Name",label:"Name",register:j,name:"name"})}),e.jsx(l,{className:"mt-2",xs:7,children:e.jsx(o,{type:"checkbox",label:"Is Active",register:j,name:"isActive"})})]}),e.jsxs("div",{className:"d-flex justify-content-end mt-3 gap-2",children:[e.jsx(A,{variant:"light",onClick:s,children:"Cancel"}),e.jsx(B,{type:"submit",variant:"primary",disabled:!S||!f||g,loading:g||m,children:"Save"})]})]})})]})},Y=w(z),q=[{header:"Id",accessorKey:"id",enableSorting:!0,cell:({row:a})=>{const{id:s}=a.original;return e.jsx("div",{className:"table-profile-component",children:e.jsx("strong",{children:s})})}},{header:"Name",enableSorting:!0,accessorKey:"name"},{header:"Active",enableSorting:!0,accessorKey:"isActive",enableGlobalFilter:!1,cell:({getValue:a})=>{var s,t;return e.jsx("strong",{className:P(((s=a())==null?void 0:s.toString().toLowerCase())==="true"?"text-success":"text-danger","text-capitalize"),children:((t=a())==null?void 0:t.toString())=="true"?"Yes":"No"})}},{header:"",accessorKey:"edit",cell:({row:a})=>{const{id:s}=a.original,{show:t,onShow:n,onHide:r}=I();return e.jsxs(e.Fragment,{children:[s!="root"?e.jsx("button",{className:"btn btn-soft-primary rounded-pill",onClick:n,children:"Edit"}):"N/A(You)",t&&e.jsx(Y,{show:t,onHide:r,data:a.original})]})}}],G=({show:a,onHide:s})=>{const{tenantsStore:t}=M(),{createTenant:n,loading:r}=t,m=x.useMemo(()=>({id:"",name:"",adminEmail:"",password:"Password123!",hasIsolatedDatabase:!1}),[]),p=k({id:c().required("The key is required"),name:c().required("Tenant name is required"),adminEmail:c().required("The admin email is required").email(),password:c().required("The password is required")}),{reset:d,register:i,handleSubmit:j,formState:{isDirty:y,isValid:S,isSubmitting:f}}=L({defaultValues:m,resolver:R(p)}),g=()=>{d(),s()},T=async v=>{try{await n(v),d(),s(),b.success("Tenant created successfully")}catch(h){const u=h==null?void 0:h.message;b.error(u)}};return e.jsx(D,{show:a,onHide:g,headerTitle:"Add Tenant",children:e.jsxs("form",{onSubmit:j(T),children:[e.jsxs(C,{className:"mt-2",children:[e.jsx(l,{className:"mt-2",xs:6,children:e.jsx(o,{type:"text",placeholder:"Tenant Id",label:"Tenant Id",register:i,name:"id"})}),e.jsx(l,{className:"mt-2",xs:6,children:e.jsx(o,{type:"text",placeholder:"Name",label:"Name",register:i,name:"name"})}),e.jsx(l,{className:"mt-2",xs:6,children:e.jsx(o,{type:"text",placeholder:"admin@email.com",label:"Admin Email",register:i,name:"adminEmail"})}),e.jsx(l,{className:"mt-2",xs:6,children:e.jsx(o,{type:"text",placeholder:"Password",label:"Password",register:i,name:"password"})})]}),e.jsx(C,{children:e.jsx(l,{xs:6,children:e.jsx(o,{type:"checkbox",label:"Isolated Database",register:i,name:"hasIsolatedDatabase"})})}),e.jsxs("div",{className:"d-flex justify-content-end mt-4 gap-2",children:[e.jsx(A,{variant:"light",onClick:s,children:"Cancel"}),e.jsx(B,{type:"submit",variant:"primary",disabled:!y||!S||f,loading:f||r,children:"Save"})]})]})})},H=w(G),Q=()=>{const{tenantsStore:a}=M(),{loadTenants:s,tenantsSorted:t,loadingInitial:n}=a,{show:r,onShow:m,onHide:p}=I(),d=x.useMemo(()=>t,[t]),i=x.useMemo(()=>q,[q]);return x.useEffect(()=>{s()},[s]),e.jsxs(V,{title:"Tenants",action:e.jsx(A,{variant:"primary",onClick:m,children:"Add Tenant"}),children:[e.jsx(H,{show:r,onHide:p}),e.jsx(E,{className:"pt-2",children:e.jsx(E.Body,{children:e.jsx(O,{data:d,columns:i,getCoreRowModel:$(),isLoading:n,filterFieldPlaceholder:"Search tenants..."})})}),e.jsx("div",{className:"mb-2",children:e.jsx("small",{children:"Client-side pagination with sorting & filtering"})})]})},Ie=w(Q);export{Ie as default};
