import{o as N,a as L,b as E,r as h,j as e,Q as v}from"./index-DZyfIAu_.js";import{c as D}from"./clsx-CH7BE6MN.js";import{u as P,M as $,g as K}from"./index-DLjRr-q5.js";import{c as F,a as u,b as O,F as c}from"./object-DCB-L6RT.js";import{u as k,o as A}from"./yup-xyZlI54A.js";import"./world-BQlB_TTF.js";import{L as I}from"./LoadingButton-CfXmehaF.js";import{M as w}from"./Modal-DR78ItKK.js";import{R as C}from"./Row-D51VfxT-.js";import{C as m}from"./Col-Cz1u6dla.js";import{B as R}from"./Button-CbTZNhGo.js";import{C as V}from"./ClientTable-BZ2UvQSL.js";import{P as z}from"./PageLayout-UL-g3efH.js";import{C as q}from"./Card-BcnLHcba.js";import"./ElementChildren-ASgpluZ9.js";import"./InputGroupContext-TwirTIt2.js";import"./setPrototypeOf-DgZC2w_0.js";import"./warning-DRYvq3ZW.js";import"./listen-DOhMskc_.js";import"./useCallbackRef-BbKjLmD3.js";import"./useEventCallback-hjjgLohZ.js";import"./useMergedRefs-MQSzYiRk.js";import"./hasClass-C8tlBkMT.js";import"./useWindow-CPm0dSzS.js";import"./NoopTransition-9eZ7ujJa.js";import"./TransitionWrapper-CsTLgaP5.js";import"./objectWithoutPropertiesLoose-Dsqj8S3w.js";import"./AbstractModalHeader-BiwI7-FI.js";import"./contains-xpjwsOxO.js";import"./usePrevious-mhA-54pg.js";import"./DataKey-COGXBUcQ.js";import"./CloseButton-CTRRufWV.js";import"./Fade-6qqgLZnl.js";import"./divWithClassName--d4LxeB8.js";import"./Button-BuCi24HL.js";import"./simplebar-react.esm-Cgqq1i5A.js";import"./index-CeMukgnl.js";const G=({show:n,onHide:s,data:a})=>{const{tenantsStore:r}=L(),{updateTenant:d,loading:t}=r,{t:i}=E(),x=h.useMemo(()=>({id:a.id,name:a.name,isActive:a.isActive,createdOn:a.createdOn}),[a]),o=F({name:u().required(i("tenants.editModal.validation.nameRequired")),id:u().default(a.id),isActive:O().default(a.isActive),createdOn:u().default(a.createdOn)}),{reset:l,register:p,handleSubmit:g,formState:{isDirty:y,isValid:M,isSubmitting:f}}=k({defaultValues:x,resolver:A(o)}),S=()=>{l(),s()},T=async j=>{try{await d(j),s(),l(),v.info(i("tenants.editModal.editSuccess"))}catch(b){const B=(b==null?void 0:b.message)||i("tenants.editModal.editFailed");v.error(B)}};return e.jsxs(w,{show:n,onHide:S,size:"lg",centered:!0,children:[e.jsx(w.Header,{closeButton:!0,children:e.jsx("h2",{className:"mb-2 fs-3",children:i("tenants.editModal.editTitle")})}),e.jsx(w.Body,{children:e.jsxs("form",{onSubmit:g(T),children:[e.jsxs(C,{className:"mt-1",children:[e.jsx(m,{className:"mt-2",xs:7,children:e.jsx(c,{type:"text",placeholder:i("tenants.editModal.namePlaceholder"),label:i("tenants.editModal.nameLabel"),register:p,name:"name"})}),e.jsx(m,{className:"mt-2",xs:7,children:e.jsx(c,{type:"checkbox",label:i("tenants.editModal.isActiveLabel"),register:p,name:"isActive"})})]}),e.jsxs("div",{className:"d-flex justify-content-end mt-3 gap-2",children:[e.jsx(R,{variant:"light",onClick:s,children:i("tenants.editModal.cancel")}),e.jsx(I,{type:"submit",variant:"primary",disabled:!y||!M||f,loading:f||t,children:i("tenants.editModal.save")})]})]})})]})},H=N(G),Q=({t:n})=>[{header:n("tenants.columns.id"),accessorKey:"id",enableSorting:!0,cell:({row:s})=>{const{id:a}=s.original;return e.jsx("div",{className:"table-profile-component",children:e.jsx("strong",{children:a})})}},{header:n("tenants.columns.name"),enableSorting:!0,accessorKey:"name"},{header:n("tenants.columns.active"),enableSorting:!0,accessorKey:"isActive",enableGlobalFilter:!1,cell:({getValue:s})=>{var a,r;return e.jsx("strong",{className:D(((a=s())==null?void 0:a.toString().toLowerCase())==="true"?"text-success":"text-danger","text-capitalize"),children:((r=s())==null?void 0:r.toString())=="true"?n("common.yes"):n("common.no")})}},{header:"",accessorKey:"edit",cell:({row:s})=>{const{id:a}=s.original,{show:r,onShow:d,onHide:t}=P();return e.jsxs(e.Fragment,{children:[a!="root"?e.jsx("button",{className:"btn btn-soft-primary rounded-pill",onClick:d,children:n("tenants.columns.edit")}):n("tenants.columns.naYou"),r&&e.jsx(H,{show:r,onHide:t,data:s.original})]})}}],Y=({show:n,onHide:s})=>{const{tenantsStore:a}=L(),{createTenant:r,loading:d}=a,{t}=E(),i=h.useMemo(()=>({id:"",name:"",adminEmail:"",password:"Password123!",hasIsolatedDatabase:!1}),[]),x=F({id:u().required(t("tenants.registerModal.validation.keyRequired")),name:u().required(t("tenants.registerModal.validation.nameRequired")),adminEmail:u().required(t("tenants.registerModal.validation.adminEmailRequired")).email(t("tenants.registerModal.validation.adminEmailInvalid")),password:u().required(t("tenants.registerModal.validation.passwordRequired"))}),{reset:o,register:l,handleSubmit:p,formState:{isDirty:g,isValid:y,isSubmitting:M}}=k({defaultValues:i,resolver:A(x)}),f=()=>{o(),s()},S=async T=>{try{await r(T),o(),s(),v.success(t("tenants.registerModal.createSuccess"))}catch(j){const b=(j==null?void 0:j.message)||t("tenants.registerModal.createFailed");v.error(b)}};return e.jsx($,{show:n,onHide:f,headerTitle:t("tenants.registerModal.addTitle"),children:e.jsxs("form",{onSubmit:p(S),children:[e.jsxs(C,{className:"mt-2",children:[e.jsx(m,{className:"mt-2",xs:6,children:e.jsx(c,{type:"text",placeholder:t("tenants.registerModal.tenantIdPlaceholder"),label:t("tenants.registerModal.tenantIdLabel"),register:l,name:"id"})}),e.jsx(m,{className:"mt-2",xs:6,children:e.jsx(c,{type:"text",placeholder:t("tenants.registerModal.namePlaceholder"),label:t("tenants.registerModal.nameLabel"),register:l,name:"name"})}),e.jsx(m,{className:"mt-2",xs:6,children:e.jsx(c,{type:"text",placeholder:t("tenants.registerModal.adminEmailPlaceholder"),label:t("tenants.registerModal.adminEmailLabel"),register:l,name:"adminEmail"})}),e.jsx(m,{className:"mt-2",xs:6,children:e.jsx(c,{type:"text",placeholder:t("tenants.registerModal.passwordPlaceholder"),label:t("tenants.registerModal.passwordLabel"),register:l,name:"password"})})]}),e.jsx(C,{children:e.jsx(m,{xs:6,children:e.jsx(c,{type:"checkbox",label:t("tenants.registerModal.isolatedDatabaseLabel"),register:l,name:"hasIsolatedDatabase"})})}),e.jsxs("div",{className:"d-flex justify-content-end mt-4 gap-2",children:[e.jsx(R,{variant:"light",onClick:s,children:t("tenants.registerModal.cancel")}),e.jsx(I,{type:"submit",variant:"primary",disabled:!g||!y||M,loading:M||d,children:t("tenants.registerModal.save")})]})]})})},_=N(Y),J=()=>{const{tenantsStore:n,authStore:s}=L(),{loadTenants:a,tenantsSorted:r,loadingInitial:d}=n,{show:t,onShow:i,onHide:x}=P(),{t:o,i18n:l}=E();h.useEffect(()=>{s.setTitle(o("tenants.title"))},[o,s,l.language]);const p=h.useMemo(()=>r,[r]),g=h.useMemo(()=>Q({t:o}),[o]);return h.useEffect(()=>{a()},[a]),e.jsxs(z,{action:e.jsx(R,{variant:"primary",onClick:i,children:o("tenants.addTenant")}),children:[e.jsx(_,{show:t,onHide:x}),e.jsx(q,{className:"pt-2",children:e.jsx(q.Body,{children:e.jsx(V,{data:p,columns:g,getCoreRowModel:K(),isLoading:d,filterFieldPlaceholder:o("tenants.searchPlaceholder")})})}),e.jsx("div",{className:"mb-2",children:e.jsx("small",{children:o("tenants.paginationDescription")})})]})},Fe=N(J);export{Fe as default};
